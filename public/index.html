<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 尾牙大亂鬥</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; text-align: center; background: #111; color: #fff; overflow: hidden; touch-action: manipulation; }
        
        /* 選隊伍畫面 */
        #selection { display: flex; height: 100vh; width: 100%; }
        .team-btn { flex: 1; font-size: 2rem; border: none; color: white; font-weight: bold; cursor: pointer; }
        #btnA { background: #e84118; } /* 紅 */
        #btnB { background: #0097e6; } /* 藍 */
        
        /* 戰鬥畫面 */
        #gameArea { display: none; height: 100vh; flex-direction: column; justify-content: center; align-items: center; }
        
        #clickBtn { 
            width: 250px; height: 250px; border-radius: 50%; border: 8px solid rgba(255,255,255,0.8);
            font-size: 2.5rem; background: #fbc531; color: #2f3640; font-weight: 900;
            box-shadow: 0 0 40px rgba(251, 197, 49, 0.6); 
            transition: transform 0.05s;
        }
        #clickBtn:active { transform: scale(0.9); }
        #clickBtn:disabled { background: #7f8fa6; box-shadow: none; border-color: #555; color: #333; cursor: not-allowed; }
        
        #statusText { margin-bottom: 30px; font-size: 1.5rem; min-height: 1.5em; }
    </style>
</head>
<body>

    <div id="selection">
        <button id="btnA" class="team-btn" onclick="selectTeam('A')">紅隊<br>(左邊座位)</button>
        <button id="btnB" class="team-btn" onclick="selectTeam('B')">藍隊<br>(右邊座位)</button>
    </div>

    <div id="gameArea">
        <h2 id="statusText">等待開始...</h2>
        <button id="clickBtn" onclick="sendClick()" disabled>連擊!!</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let myTeam = '';

        function selectTeam(team) {
            myTeam = team;
            document.getElementById('selection').style.display = 'none';
            document.getElementById('gameArea').style.display = 'flex';
            document.body.style.background = team === 'A' ? '#e84118' : '#0097e6';
        }

        function sendClick() {
            if (navigator.vibrate) navigator.vibrate(30); // 手機震動
            socket.emit('click', myTeam);
        }

        socket.on('gameStart', () => {
            document.getElementById('statusText').innerText = "瘋狂點擊！！！";
            document.getElementById('clickBtn').disabled = false;
            document.getElementById('clickBtn').style.background = "#fbc531";
        });

        socket.on('gameOver', () => {
            document.getElementById('statusText').innerText = "遊戲結束！";
            document.getElementById('clickBtn').disabled = true;
        });

        socket.on('resetGame', () => {
            document.getElementById('statusText').innerText = "等待開始...";
            document.getElementById('clickBtn').disabled = true;
        });
    </script>
</body>
</html>